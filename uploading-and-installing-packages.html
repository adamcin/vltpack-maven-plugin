<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2016-09-20 10:59 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160920" />
    <meta http-equiv="Content-Language" content="en" />
    <title>VLT Pack Maven Plugin &#x2013; Uploading and Installing Packages</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                  <!-- Google Analytics -->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-37073514-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
          </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="./" id="bannerLeft">
                <h2>VLT Pack Maven Plugin</h2>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2016-09-20 10:59
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.3.0
                      </li>
                      
              
      
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="http://wiki.github.com/adamcin/vltpack-maven-plugin/frequently-asked-questions" class="externalLink" title="FAQ">
        FAQ</a>
      </li>

  
    <li class="pull-right">
                      <a href="http://wiki.github.com/adamcin/vltpack-maven-plugin/" class="externalLink" title="Wiki">
        Wiki</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                              
      <li>
  
                          <a href="index.html" title="Introduction">
          <span class="none"></span>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="plugin-info.html" title="Goals">
          <span class="none"></span>
        Goals</a>
            </li>
                
      <li>
  
                          <a href="usage.html" title="Usage">
          <span class="none"></span>
        Usage</a>
            </li>
                
      <li>
  
                          <a href="scaladocs/index.html" title="ScalaDocs">
          <span class="none"></span>
        ScalaDocs</a>
            </li>
                              <li class="nav-header">How To</li>
                              
      <li>
  
                          <a href="vltpack-and-vlt.html" title="VLT Pack and VLT">
          <span class="none"></span>
        VLT Pack and VLT</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Upload Packages to CQ</a>
          </li>
                
      <li>
  
                          <a href="embedding-dependencies.html" title="Embed Dependencies">
          <span class="none"></span>
        Embed Dependencies</a>
            </li>
                
      <li>
  
                          <a href="integration-testing.html" title="Setup Integration Tests">
          <span class="none"></span>
        Setup Integration Tests</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                    
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                  
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
                              <li class="nav-header">Projects @ adamcin.net</li>
                              
      <li>
  
                          <a href="../scalamojo-maven-plugin" title="Scala Mojo Maven Plugin">
          <span class="none"></span>
        Scala Mojo Maven Plugin</a>
            </li>
                
      <li>
  
                          <a href="./" title="VLT Pack Maven Plugin">
          <span class="none"></span>
        VLT Pack Maven Plugin</a>
            </li>
                
      <li>
  
                          <a href="../snagjar-maven-plugin" title="Snag Jar Maven Plugin">
          <span class="none"></span>
        Snag Jar Maven Plugin</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="http://adamcin.net/vltpack-maven-plugin" data-size="tall" ></div>

                   <div class="clear"></div>
                   
        
        
        
    <iframe src="https://www.facebook.com/plugins/like.php?href=http://adamcin.net/vltpack-maven-plugin&send=false&layout=box_count&show-faces=false&action=like&colorscheme=light"
        scrolling="no" frameborder="0"
        style="border:none; width:48px; height:63px; margin-top: 10px;" ></iframe>
               <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                   <a href="http://maven.apache.org" title="Build with Maven" class="builtBy">
        <img class="builtBy"  alt="Build with Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            
    
        <div class="section">
<h2><a name="Uploading_and_Installing_Packages"></a>Uploading and Installing Packages</h2>
            
<div class="section">
<h3><a name="Uploading_a_package_from_a_maven_repository"></a>Uploading a package from a maven repository</h3>
                
<p>
                    The only convenience goal provided by the vltpack-maven-plugin for general package installation is
                    the <a href="upload-from-repo-mojo.html"><tt>upload-from-repo</tt></a> goal. This goal is intended
                    to be executed outside of a maven project, and requires the user to specify a <tt>coords</tt>
                    property that defines a set of maven artifact coordinates in compact, colon-delimited form. The
                    value of this property will be resolved against your local and active remote repositories. If an
                    artifact is resolved and the artifact file is a valid CRX package, the file will be uploaded and
                    installed. For example, this command will upload and install Recap from the Maven Central
                    repository:
                </p>
                
<div class="source"><pre class="prettyprint">mvn net.adamcin:vltpack-maven-plugin:1.0.0:upload-from-repo -Dcoords=net.adamcin.recap:recap-graniteui:zip:0.8.0</pre></div>
            </div>
            
<div class="section">
<h3><a name="Uploading_a_vltpack_project_artifact_as_part_of_a_maven_build"></a>Uploading a vltpack project artifact as part of a maven build</h3>
                
<p>
                    The vltpack-maven-plugin will upload and install the main project artifact to the configured CQ
                    server during a maven build if the <tt>supportITs</tt> property is set to <tt>true</tt>. This can
                    also be specified in a user profile to make CQ installation of the package easier in IDEs, but
                    wouldn't you rather be uploading JSPs and content with the <tt>vlt</tt> tool instead? Just think of
                    the size of your CRX DataStore!
                </p>
            </div>
            
<div class="section">
<h3><a name="Common_HTTP_Parameters"></a>Common HTTP Parameters</h3>
                
<p>
                    The vltpack-maven-plugin was designed to allow the use of profiles defined in a user's
                    <tt>settings.xml</tt> to target commonly-used CRX servers for package upload, bundle installation,
                    and integration test execution. By default, the plugin attempt to connect to a CRX server at
                    <tt>http://localhost:4502/crx</tt> with basic credentials of <tt>admin:admin</tt>. To target a
                    different port, one can simply create a profile in <tt>~/.m2/settings.xml</tt> that sets the
                    <tt>vltpack.port</tt> property, and activate it. For example, to easily target a publish server
                    running locally on the conventional port 4503, add the following profile:
                </p>
                
<div class="source"><pre class="prettyprint">
&lt;profile&gt;
    &lt;id&gt;publish-server&lt;/id&gt;
    &lt;properties&gt;
        &lt;vltpack.port&gt;4503&lt;/vltpack.port&gt;
    &lt;/properties&gt;
&lt;/profile&gt;
                </pre></div>
                
<p>
                    Setting a single property is of course, not very impressive, but imagine that you must upload to a
                    shared CQ integration server running on a non-standard port with admin credentials disabled, which
                    also happens to be sitting behind its own HTTP proxy and is mapped to a different context path in
                    order to integrate with a corporate SSO configuration. Suddenly a user profile starts to look more
                    attractive, yes?
                </p>
                
<div class="source"><pre class="prettyprint">
&lt;profile&gt;
    &lt;id&gt;corp-CQ-IT-auth-server&lt;/id&gt;
    &lt;properties&gt;
        &lt;vltpack.host&gt;cqhqdevauth01&lt;/vltpack.host&gt;
        &lt;vltpack.port&gt;8502&lt;/vltpack.port&gt;
        &lt;vltpack.user&gt;jenkins&lt;/vltpack.user&gt;
        &lt;vltpack.pass&gt;Chang3m3&lt;/vltpack.pass&gt;
        &lt;vltpack.context&gt;/cq&lt;/vltpack.context&gt;
        &lt;vltpack.proxy.set&gt;true&lt;/vltpack.proxy.set&gt;
        &lt;vltpack.proxy.host&gt;dmzNA083.corp.acme.com&lt;/vltpack.proxy.host&gt;
        &lt;vltpack.proxy.user&gt;appuser0159&lt;/vltpack.proxy.user&gt;
        &lt;vltpack.proxy.pass&gt;October19&lt;/vltpack.proxy.pass&gt;
    &lt;/properties&gt;
&lt;/profile&gt;
                </pre></div>
                
<p>
                    In addition to HTTP parameters, goals which upload and install packages also accept the following
                    user properties to control the behavior of the package installation process:
                </p>
                
<dl>
                    
<dt><tt>vltpack.upload.force</tt> (default: <tt>false</tt>)</dt>
                    
<dd>
                        Set to true to upload and install the package even if a package with the same ID
                        (group:name:version) is already installed on the server.
                    </dd>
                    
<dt><tt>vltpack.upload.recursive</tt> (default: <tt>true</tt>)</dt>
                    
<dd>
                        Set to false to disable recursive installation of subpackages.
                    </dd>
                    
<dt><tt>vltpack.upload.autosave</tt> (minimum: <tt>1024</tt>)</dt>
                    
<dd>
                        Increase this value in order to optimize the performance of package installation, based on the
                        characteristics of the target server (significant concurrent activity, clustered repository,
                        large number of affected nodes, etc.).
                    </dd>
                    
<dt><tt>vltpack.upload.timeout</tt> (default: <tt>60</tt>)</dt>
                    
<dd>
                        Set the number of seconds to wait for CRX Package Manager service availability before failing
                        the execution. The vltpack-maven-plugin checks for service availability before each POST request
                        in order to avoid a minor yet annoying behavior caused such requests if they are sent to the
                        Package Manager service URL while the bundle is temporarily deactivated, which can happen
                        immediately after installing another package with embedded OSGi bundles. The SlingPostServlet
                        ends up handling the request, which creates nodes in the repository at /crx/packmgr/*. The
                        existence of these nodes confuses the CQ Link Rewriter Filter, which then decides to change the
                        Package Manager link on the CQ Welcome page from /crx/packmgr/ to /crx/packmgr.html, which is
                        incorrect. If you ever see this happen on one of your servers, it is probably caused by this
                        issue.
                    </dd>
                </dl>
            </div>
        </div>
    

                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2012&#x2013;2016.
          All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
